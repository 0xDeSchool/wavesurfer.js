<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
	"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<title>README.html</title>

</head>

<body>

<h1>wavesurfer.js</h1>

<p>Interactive navigable audio visualization using <a href="https://dvcs.w3.org/hg/audio/raw-file/tip/webaudio/specification.html">Web Audio</a> and Canvas.</p>

<p><img src="example/screenshot.png?raw=true" alt="Screenshot" title="Screenshot" /></p>

<h2>Browser support</h2>

<p>wavesurfer.js works only in <a href="http://caniuse.com/audio-api">modern browsers supporting Web Audio</a>.</p>

<p>It will fallback to Audio Element in other browsers (without graphics). You can also try <a href="https://github.com/laurentvd/wavesurfer.swf">wavesurfer.swf</a> which is a Flash-based fallback with graphics.</p>

<h2>FAQ</h2>

<h3>Can the audio start playing before the waveform is drawn?</h3>

<p>Yes, if you use the <code>backend: 'MediaElement'</code> option. See here: http://wavesurfer-js.org/example/audio-element/. The audio will start playing as you press play. A thin line will be displayed until the whole audio file is downloaded and decoded to draw the waveform.</p>

<h3>Can drawing be done as file loads?</h3>

<p>No. Web Audio needs the whole file to decode it in the browser. You can however load pre-decoded waveform data to draw the waveform immediately. See here: http://wavesurfer-js.org/example/audio-element/ (the "Pre-recoded Peaks" section).</p>

<h2>API in examples</h2>

<p>Create an instance:</p>

<p><code>javascript
var wavesurfer = Object.create(WaveSurfer);
</code></p>

<p>Initialize it with a container element (plus some options):</p>

<p><code>javascript
wavesurfer.init({
    container: '#wave',
    waveColor: 'violet',
    progressColor: 'purple'
});
</code></p>

<p>Subscribe to some events:</p>

<p><code>javascript
wavesurfer.on('ready', function () {
    wavesurfer.play();
});
</code></p>

<p>Load an audio file from a URL:</p>

<p><code>javascript
wavesurfer.load('example/media/demo.wav');
</code></p>

<p>See the example code <a href="/example/main.js">here</a>.</p>

<p>For a list of other projects using wavesurfer.js, check out
<a href="https://github.com/katspaugh/wavesurfer.js/wiki/Projects">the wiki</a>
where you can also add your own project.</p>

<h2>WaveSurfer Options</h2>

<p>| option | type | default | description |
| --- | --- | --- | --- |
| <code>audioContext</code> | object | <em>none</em> | Use your own previously initialized <code>AudioContext</code> or leave blank. |
| <code>audioRate</code> | float | <code>1</code> | Speed at which to play audio.  Lower number is slower. |
| <code>backend</code> | string | <code>WebAudio</code> | <code>WebAudio</code> or <code>MediaElement</code>. In most cases you don't have to set this manually. <code>MediaElement</code> is a fallback for unsupported browsers. |
| <code>barWidth</code> | number | <em>none</em> | If specified, the waveform will be drawn like this: ▁ ▂ ▇ ▃ ▅ ▂ |
| <code>container</code> | mixed | <em>none</em> | CSS-selector or HTML-element where the waveform should be drawn. This is the only required parameter. |
| <code>cursorColor</code> | string | <code>#333</code> | The fill color of the cursor indicating the playhead position. |
| <code>cursorWidth</code> | integer | <code>1</code> | Measured in pixels. |
| <code>fillParent</code> | boolean | <code>true</code> | Whether to fill the entire container or draw only according to <code>minPxPerSec</code>. |
| <code>height</code> | integer | <code>128</code> | The height of the waveform.  Measured in pixels. |
| <code>hideScrollbar</code> | boolean | <code>false</code> | Whether to hide the horizontal scrollbar when one would normally be shown. |
| <code>interact</code> | boolean | <code>true</code> | Whether the mouse interaction will be enabled at initialization.  You can switch this parameter at any time later on. |
| <code>minPxPerSec</code> | integer | <code>50</code> | Minimum number of pixels per second of audio. |
| <code>normalize</code> | boolean | <code>false</code> | If <code>true</code>, normalize by the maximum peak instead of 1.0. |
| <code>pixelRatio</code> | integer | <code>window.devicePixelRatio</code> | Can be set to <code>1</code> for faster rendering. |
| <code>progressColor</code> | string | <code>#555</code> | The fill color of the part of the waveform behind the cursor. |
| <code>scrollParent</code> | boolean | <code>false</code> | Whether to scroll the container with a lengthy waveform. Otherwise the waveform is shrunk to the container width (see <code>fillParent</code>). |
| <code>skipLength</code> | float | <code>2</code> | Number of seconds to skip with the <code>skipForward()</code> and <code>skipBackward()</code> methods. |
| <code>waveColor</code> | string | <code>#999</code> | The fill color of the waveform after the cursor. |
| <code>autoCenter</code> | boolean | true | If a scrollbar is present, center the waveform around the progress |</p>

<h2>WaveSurfer Methods</h2>

<p>All methods are intentionally public, but the most readily available are the following:</p>

<ul>
<li><code>init(options)</code> – Initializes with the options listed above.</li>
<li><code>destroy()</code> – Removes events, elements and disconnects Web Audio nodes.</li>
<li><code>empty()</code> – Clears the waveform as if a zero-length audio is loaded.</li>
<li><code>getCurrentTime()</code> – Returns current progress in seconds.</li>
<li><code>getDuration()</code> – Returns the duration of an audio clip in seconds.</li>
<li><code>isPlaying()</code> – Returns true if currently playing, false otherwise.</li>
<li><code>load(url)</code> – Loads audio from URL via XHR. Returns XHR object.</li>
<li><code>loadBlob(url)</code> – Loads audio from a <code>Blob</code> or <code>File</code> object.</li>
<li><code>on(eventName, callback)</code> – Subscribes to an event.  See <a href="#wavesurfer-events">WaveSurfer Events</a> section below for a list.</li>
<li><code>un(eventName, callback)</code> – Unsubscribes from an event.</li>
<li><code>unAll()</code> – Unsubscribes from all events.</li>
<li><code>pause()</code> – Stops playback.</li>
<li><code>play([start[, end]])</code> – Starts playback from the current position.  Optional <code>start</code> and <code>end</code> measured in seconds can be used to set the range of audio to play.</li>
<li><code>playPause()</code> – Plays if paused, pauses if playing.</li>
<li><code>seekAndCenter(progress)</code> – Seeks to a progress and centers view <code>[0..1]</code> (0 = beginning, 1 = end).</li>
<li><code>seekTo(progress)</code> – Seeks to a progress <code>[0..1]</code> (0=beginning, 1=end).</li>
<li><code>setFilter(filters)</code> - For inserting your own WebAudio nodes into the graph.  See <a href="#connecting-filters">Connecting Filters</a> below.</li>
<li><code>setPlaybackRate(rate)</code> – Sets the speed of playback (<code>0.5</code> is half speed, <code>1</code> is normal speed, <code>2</code> is double speed and so on).</li>
<li><code>setVolume(newVolume)</code> – Sets the playback volume to a new value <code>[0..1]</code> (0 = silent, 1 = maximum).</li>
<li><code>skip(offset)</code> – Skip a number of seconds from the current position (use a negative value to go backwards).</li>
<li><code>skipBackward()</code> - Rewind <code>skipLength</code> seconds.</li>
<li><code>skipForward()</code> - Skip ahead <code>skipLength</code> seconds.</li>
<li><code>stop()</code> – Stops and goes to the beginning.</li>
<li><code>toggleMute()</code> – Toggles the volume on and off.</li>
<li><code>toggleInteraction()</code> – Toggle mouse interaction.</li>
<li><code>toggleScroll()</code> – Toggles <code>scrollParent</code>.</li>
<li><code>zoom(pxPerSec)</code> – Horiontally zooms the waveform in and out. The
parameter is a number of horizontal pixels per second of audio. It
also changes the parameter <code>minPxPerSec</code> and enables the
<code>scrollParent</code> option.</li>
</ul>

<h5>Connecting Filters</h5>

<p>You can insert your own Web Audio nodes into the graph using the method <code>setFilter()</code>. Example:</p>

<p><code>javascript
var lowpass = wavesurfer.backend.ac.createBiquadFilter();
wavesurfer.backend.setFilter(lowpass);
</code></p>

<h2>WaveSurfer Events</h2>

<p>General events:</p>

<ul>
<li><code>audioprocess</code> – Fires continuously as the audio plays. Also fires on seeking.</li>
<li><code>error</code> – Occurs on error.  Callback will receive (string) error message.</li>
<li><code>finish</code> – When it finishes playing.</li>
<li><code>loading</code> – Fires continuously when loading via XHR or drag'n'drop. Callback will receive (integer) loading progress in percents [0..100] and (object) event target.</li>
<li><code>pause</code> – When audio is paused.</li>
<li><code>play</code> – When play starts.</li>
<li><code>ready</code> – When audio is loaded, decoded and the waveform drawn.</li>
<li><code>scroll</code> - When the scrollbar is moved.  Callback will receive a <code>ScrollEvent</code> object.</li>
<li><code>seek</code> – On seeking.  Callback will receive (float) progress [0..1].</li>
<li><code>zoom</code> – On zooming. Callback will receive (integer) minPxPerSec.</li>
</ul>

<p>Region events (exposed by the Regions plugin):</p>

<ul>
<li><code>region-in</code> – When playback enters a region. Callback will receive the <code>Region</code> object.</li>
<li><code>region-out</code>– When playback leaves a region. Callback will receive the <code>Region</code> object.</li>
<li><code>region-mouseenter</code> - When the mouse moves over a region.  Callback will receive the <code>Region</code> object, and a <code>MouseEvent</code> object.</li>
<li><code>region-mouseleave</code> - When the mouse leaves a region.  Callback will receive the <code>Region</code> object, and a <code>MouseEvent</code> object.</li>
<li><code>region-click</code> - When the mouse clicks on a region.  Callback will receive the <code>Region</code> object, and a <code>MouseEvent</code> object.</li>
<li><code>region-dblclick</code> - When the mouse double-clicks on a region.  Callback will receive the <code>Region</code> object, and a <code>MouseEvent</code> object.</li>
<li><code>region-created</code> – When a region is created. Callback will receive the <code>Region</code> object.</li>
<li><code>region-updated</code> – When a region is updated. Callback will receive the <code>Region</code> object.</li>
<li><code>region-update-end</code> – When dragging or resizing is finished. Callback will receive the <code>Region</code> object.</li>
<li><code>region-removed</code> – When a region is removed. Callback will receive the <code>Region</code> object.</li>
</ul>

<h2>Regions Plugin</h2>

<p>Regions are visual overlays on waveform that can be used to play and
loop portions of audio. Regions can be dragged and resized.</p>

<p>Visual customization is possible via CSS (using the selectors
<code>.wavesurfer-region</code> and <code>.wavesurfer-handle</code>).</p>

<p>To enable the plugin, add the script <code>plugin/wavesurfer.regions.js</code> to
your page.</p>

<p>After doing that, use <code>wavesurfer.addRegion()</code> to create Region objects.</p>

<h3>Exposed Methods</h3>

<ul>
<li><code>addRegion(options)</code> – Creates a region on the waveform. Returns a <code>Region</code> object.  See <a href="#region-options">Region Options</a>, <a href="#region-methods">Region Methods</a> and <a href="#region-events">Region Events</a> below.
<ul>
<li><strong>Note:</strong> You cannot add regions until the audio has finished loading, otherwise the <code>start:</code> and <code>end:</code> properties of the new region will be set to <code>0</code>, or an unexpected value.</li>
</ul></li>
<li><code>clearRegions()</code> – Removes all regions.</li>
<li><code>enableDragSelection(options)</code> – Lets you create regions by selecting.
areas of the waveform with mouse. <code>options</code> are Region objects' params (see <a href="#region-options">below</a>).</li>
</ul>

<h3>Region Options</h3>

<p>| option | type | default | description |
| --- | --- | --- | --- |
| <code>id</code> | string | random | The id of the region. |
| <code>start</code> | float | <code>0</code> | The start position of the region (in seconds). |
| <code>end</code> | float | <code>0</code> | The end position of the region (in seconds). |
| <code>loop</code> | boolean | <code>false</code> | Whether to loop the region when played back. |
| <code>drag</code> | boolean | <code>true</code> | Allow/dissallow dragging the region. |
| <code>resize</code> | boolean | <code>true</code> | Allow/dissallow resizing the region. |
| <code>color</code> | string | <code>"rgba(0, 0, 0, 0.1)"</code> | HTML color code. |</p>

<h3>Region Methods</h3>

<ul>
<li><code>remove()</code> - Remove the region object.</li>
<li><code>update(options)</code> - Modify the settings of the region.</li>
<li><code>play()</code> - Play the audio region from the start to end position.</li>
</ul>

<h3>Region Events</h3>

<p>General events:</p>

<ul>
<li><code>in</code> - When playback enters the region.</li>
<li><code>out</code> - When playback leaves the region.</li>
<li><code>remove</code> - Happens just before the region is removed.</li>
<li><code>update</code> - When the region's options are updated.</li>
</ul>

<p>Mouse events:</p>

<ul>
<li><code>click</code> - When the mouse clicks on the region.  Callback will receive a <code>MouseEvent</code>.</li>
<li><code>dblclick</code> - When the mouse double-clicks on the region.  Callback will receive a <code>MouseEvent</code>.</li>
<li><code>over</code> - When mouse moves over the region.  Callback will receive a <code>MouseEvent</code>.</li>
<li><code>leave</code> - When mouse leaves the region.  Callback will receive a <code>MouseEvent</code>.</li>
</ul>

<h2>Development</h2>

<p><a href="https://www.npmjs.com/package/wavesurfer.js"><img src="https://img.shields.io/npm/v/wavesurfer.js.svg?style=flat" alt="npm version" title="" /></a>
<a href=""><img src="https://img.shields.io/npm/dm/wavesurfer.js.svg" alt="npm" title="" /></a>
<a href="https://travis-ci.org/katspaugh/wavesurfer.js"><img src="https://travis-ci.org/katspaugh/wavesurfer.js.svg?branch=master" alt="Build Status" title="" /></a>
<a href="https://coveralls.io/r/katspaugh/wavesurfer.js"><img src="https://coveralls.io/repos/katspaugh/wavesurfer.js/badge.svg" alt="Coverage Status" title="" /></a></p>

<p>Install <code>grunt-cli</code> using npm:</p>

<p><code>
npm install -g grunt-cli
</code></p>

<p>Install development dependencies:</p>

<p><code>
npm install
</code></p>

<p>Build a minified version of the library and plugins. This command also checks
for code-style mistakes and runs the tests:</p>

<p><code>
grunt
</code></p>

<p>Generated files are placed in the <code>dist</code> directory.</p>

<p>Running tests only:</p>

<p><code>
grunt test
</code></p>

<p>Creating a coverage report:</p>

<p><code>
grunt coverage
</code></p>

<p>The HTML report can be found in <code>coverage/html/index.html</code>.</p>

<h2>Credits</h2>

<p>Initial idea by <a href="https://github.com/xoxulin">Alex Khokhulin</a>. Many
thanks to
<a href="https://github.com/katspaugh/wavesurfer.js/contributors">the awesome contributors</a>!</p>

<h2>License</h2>

<p><img src="https://i.creativecommons.org/l/by/3.0/88x31.png" alt="cc-by" title="" /></p>

<p>This work is licensed under a
<a href="https://creativecommons.org/licenses/by/3.0/deed.en_US">Creative Commons Attribution 3.0 Unported License</a>.</p>

</body>
</html>
